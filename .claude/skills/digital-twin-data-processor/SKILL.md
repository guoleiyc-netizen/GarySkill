---
name: shuzi-luansheng
description: 从对话文本数据中提取语言特征和人格信息，生成数字孪生角色所需的结构化数据。用于创建 Character.AI 或酒馆角色卡。支持录音转写、聊天记录、社交媒体等多种文本格式。
---

# 数字孪生 (SHUZI LUANSHENG)

从真实对话数据中提取特征，为创建数字孪生角色准备素材。

## 当前版本

**版本**: v2.1
**更新日期**: 2026年2月3日
**处理案例**: 璐璐、Harry、郭磊、罗老师等

**主要改进**:
- ✅ 增加人物识别指南和注意事项
- ✅ 新增"自我表露度"分析维度
- ✅ 细化数据量评估标准
- ✅ 优化大五人格评分标准
- ✅ 添加"独特之处"报告章节

详见 `CHANGELOG.md`

---

## 使用场景

当用户提供以下数据时使用此 skill：
- 录音转写文本文件（.txt/.md）
- 聊天记录导出（微信、WhatsApp 等）
- 社交媒体内容导出
- 大五人格测评分数
- 需要生成 Character.AI 或酒馆角色卡
- 需要人才评估报告或组织发展建议

## 工作流程

```
输入数据 → 特征提取 → 人格映射 → 输出生成
   ↓           ↓          ↓          ↓
文本文件   语言风格    大五人格   CC/酒馆格式
大五分数   行为模式    转化描述    角色卡
```

### Step 1: 数据收集与预处理

**⚠️ 重要：人物识别注意事项**

在处理多人对话文件时，请特别注意：

1. **不要完全依赖发言人标签** - 原始录音转写可能标注不准确
2. **根据内容识别说话人**：
   - 查找自我介绍语句（"那我就讲一下我自己"）
   - 识别职业相关话题
   - 注意对话逻辑和语境
3. **使用Task工具辅助** - 当人物关系不确定时，使用general-purpose agent进行识别：
   ```
   Task tool → subagent_type: general-purpose
   提示: "分析文件，识别说话人，提取各自对话内容"
   ```
4. **验证识别结果** - 提取后检查字数、话题分布是否合理

**确定输入数据类型**：

**录音转写文本**
- 纯文本格式（.txt/.md），单人或多人的对话
- 可能包含时间戳、说话人标记
- ⚠️ 发言人标签可能不准确，需要根据内容重新识别
- 使用 `scripts/chat_parser.py` 或 Task tool 解析

**聊天记录**
- 微信、WhatsApp、iMessage 导出
- 需要区分不同说话人
- 提取目标人物的发言

**社交媒体**
- 微博、朋友圈、Twitter 等
- 通常是短文本、有情绪表达
- 可直接作为对话样本

### Step 2: 特征提取

使用 `scripts/extract_features.py` 分析文本：

**核心特征**:
1. **口头禅与高频表达** - 提取重复出现的短语
2. **用词习惯** - 正式度、口语化程度
3. **句式结构** - 平均句长、短句/长句比例
4. **标点习惯** - 感叹号、问号、波浪号使用
5. **情绪表达** - 积极/消极情绪词频率
6. **话题偏好** - 高频词汇和话题分类
7. **自我表露度** ⭐ (v2.1新增) - 个人信息、情感、经历的暴露程度

**运行脚本**:
```bash
python scripts/extract_features.py input.txt -o features.json --pretty
```

### Step 3: 大五人格映射

将测评分数转化为性格描述：

**参考**: `references/big5_mapping.md`

每个维度（开放性、尽责性、外向性、宜人性、神经质）根据分数段对应不同的：
- 性格标签
- 行为描述
- 语言特征
- CC Description 模板

**映射逻辑**:
1. 确定主基调（分数最高的 1-2 个维度）
2. 添加细节特征（中等分数维度）
3. 补充对立面（低分维度的反向描述）
4. 融入语言特征（结合文本分析结果）

### Step 4: 输出生成

根据目标平台生成相应格式：

**Character.AI**:
- **Description**: 200-500 字性格描述
- **Greeting**: 1-3 句开场白
- **Definition**: 20-50 条对话样本

**Tavern/SillyTavern**:
- 标准 chara_card_v2 格式 JSON
- 包含 name, description, first_mes, mes_example

**参考**: `references/output_templates.md`

## 特征提取指南

详细的特征提取方法和维度定义，参见 `references/feature_extraction.md`。

包含内容：
- 语言风格分析维度（7 大类）
- 大五人格特征映射
- 输出报告结构模板

## 快速参考

### 大五人格快速映射 (v2.1更新)

| 分数 | 开放性 | 尽责性 | 外向性 | 宜人性 | 神经质 |
|------|--------|--------|--------|--------|--------|
| 90-100 | 概念创新者 ⭐ | 高度自律 | 极度外向 | 极度友善 | 高度敏感 |
| 85-89 | 快速接受者 ⭐ | 高度自律 | 极度外向 | 极度友善 | 高度敏感 |
| 70-84 | 开放创新 | 有序高效 | 热情开朗 | 温和合作 | 情绪化 |
| 55-69 | 中等开放 | 中等尽责 | 中性平衡 | 中等友善 | 中等稳定 |
| 40-54 | 略微保守 | 随性灵活 | 略微内向 | 直接坦率 | 较为稳定 |
| 0-39 | 传统务实 | 自由散漫 | 高度内向 | 挑战性强 | 极度稳定 |

**v2.1 细化说明**：
- **开放性 90-100** (概念创新者)：提出原创概念，如郭磊的"模型特质论"
- **开放性 85-89** (快速接受者)：快速接受新理念，如罗老师的"震撼但很快接受"
- **宜人性**：可结合"自我表露度"评估，高自我表露通常伴随高宜人性

### 口头禅识别标准

- 短语长度：2-15 字
- 出现频率：≥ 3 次
- 类型：开场白、连接词、情绪表达

### Description 生成模板 (v2.1更新)

```
第1段: 核心性格概述（基于最高分维度）
第2段: 行为模式和决策风格
第3段: 社交风格和沟通特点
第4段: 情绪特征和压力反应
第5段: 语言风格总结
第6段: 独特之处 ⭐ (v2.1新增) - 原创概念、关键转折、金句口头禅
```

**"独特之处"章节应包含**:
- 原创概念或理念（如有）
- 职业历程的关键转折点
- 价值观冲突与解决
- 代表性金句或口头禅
- 与众不同的特质

## 资源

### scripts/

**extract_features.py**
从对话文本中提取语言特征。支持：
- 口头禅提取
- 标点习惯分析
- 句式特征统计
- 情绪模式识别
- 话题偏好提取

使用：
```bash
python scripts/extract_features.py <input_file> -o <output_file> --pretty
```

**chat_parser.py**
解析各种格式的聊天记录。支持：
- 微信聊天记录导出
- WhatsApp 导出
- 简单对话格式 (A: xxx B: xxx)
- 录音转写文本

使用：
```bash
python scripts/chat_parser.py <input_file> --format <wechat|whatsapp|simple|transcript> --speaker <name> -o <output_file>
```

### references/

**feature_extraction.md**
详细的特征提取指南，包含：
- 语言风格分析 7 大维度
- 大五人格特征映射方法
- 输出报告结构模板

**big5_mapping.md**
大五人格分数到角色描述的映射表：
- 每个维度的 5 个分数段详细说明
- 每个分数段对应的性格描述、语言特征
- CC Description 示例
- 组合示例（创意型领导、务实分析师、温和艺术家）

**output_templates.md**
各种输出格式模板：
- Character.AI 的 Description、Greeting、Definition
- Tavern/SillyTavern 角色卡 JSON 格式
- 特征分析报告结构
- 输出文件命名建议

### assets/

目前为空。如需添加模板文件（如角色卡 JSON 模板），可放置在此目录。

## 注意事项 (v2.1更新)

### 数据质量要求

**数据量建议**:
- **小样本** (< 5,000字): 可用作快速原型，质量评分 -1
- **中等样本** (5,000-15,000字): 基本可用，基准分
- **大样本** (15,000-30,000字): 高质量数字孪生，+1分
- **超大样本** (> 30,000字): 优秀数字孪生，+2分

**数据质量标准**:
1. **隐私保护**: 处理真实人物数据时，确保已获得授权
2. **真实性**: 优先使用真实对话，而非虚构内容
3. **场景多样性**: 收集不同场景下的对话（工作、休闲、压力等）
4. **时间跨度**: 如有可能，收集不同时期的样本
5. **迭代优化**: 首次生成后，通过实际对话测试并调整
6. **避免过度拟合**: 不要包含过于具体或私密的信息

### 常见问题与解决方案

**Q1: 如何处理多人对话文件？**
- ⚠️ 不要依赖发言人标签（可能不准确）
- 根据内容识别说话人（自我介绍、职业话题、对话逻辑）
- 使用Task tool辅助识别

**Q2: 数据量不够怎么办？**
- 优先保证核心话题的完整性
- 可以先生成初版，通过迭代优化
- 在报告中标注数据局限性

**Q3: 如何评估生成质量？**
- 自我表露度是否匹配
- 语言特色是否鲜明
- 人格特质是否清晰
- 是否有"独特之处"
