# dongcha 技能更新说明 v2.2

## 更新时间
2026年1月21日

## 🎯 本次更新：Sub-Agent校验机制

### 核心创新：AI校验AI

**问题背景**：
用户反馈生成的文章"AI味道比较重"，主要问题：
- 结构过于工整（每个洞察格式完全相同）
- 缺少个人视角（没有"我"的感受和体验）
- 语言过于书面化（像学术论文）
- 标题模板化（标准格式）

**解决思路**：
> **让AI去校验AI** - 用独立的Sub-Agent从读者角度审查文章，识别"AI味道"并给出优化建议。

---

## 🤖 Sub-Agent校验机制详解

### 为什么要用Sub-Agent？

**主AI的盲点**：
- 习惯了自己的表达方式
- 难以识别过于工整的结构
- 无法判断"AI味道"的浓重程度

**Sub-Agent的优势**：
- ✅ 第三方视角更客观
- ✅ 更容易发现模板化、机械化的问题
- ✅ 能给出具体的修改示例（before/after对比）
- ✅ 不受主AI思维定式的影响

---

## 📋 Sub-Agent的角色设定

### 角色名称
**文章校验员（Article Reviewer）**

### 核心职责
1. **从读者角度审查**：像真实读者一样体验文章
2. **识别"AI味道"**：找出机器化、模板化的表达
3. **给出优化建议**：提供具体的、可执行的改进方向
4. **提供修改示例**：用before/after对比展示改进效果

### 校验维度（3大维度）

#### 1. "AI味道"检测
- ✅ 结构是否过于工整
- ✅ 语言是否过于书面化
- ✅ 标题和导语是否模板化
- ✅ 缺少个人视角和情感色彩

#### 2. 人性化检测
- ✅ 是否有"我"的视角和体验
- ✅ 是否有口语化表达
- ✅ 是否有情感波动和情绪色彩
- ✅ 是否像真人写的真实思考

#### 3. 吸引力检测
- ✅ 标题是否有点击欲望
- ✅ 导语是否让人想继续读
- ✅ 金句是否提炼到位
- ✅ 是否有独特性和新鲜感

---

## 📊 输出格式示例

### Sub-Agent校验报告模板

```markdown
## 🤖 Sub-Agent校验报告

### 🔍 "AI味道"检测

**发现问题**：
- 结构过于工整 ⭐⭐⭐
- 语言书面化 ⭐⭐⭐
- 标题模板化 ⭐⭐
- 缺少个人感 ⭐⭐⭐⭐

**具体问题**：
1. 第1、2、3个洞察都用了完全相同的结构（原文引用→现象→本质→视角→思考），缺少变化
2. 开头用了标准模板："这是XX时间的一个夜晚，XXX与XXX的深度对话"
3. 全文没有"我"的视角，像客观报道

### 💡 优化建议

**建议1：增加个人视角**
- 把"这是XX的对话"改为"我最近跟XXX聊了..."
- 在每个洞察中加入"我的发现"、"我的困惑"
- 导语用"我发现..."开头

**示例对比**：
❌ "对话中提到了一个场景..."
✅ "这让我想起前几天跟一个老板聊天，他说..."

### 📝 修改示例（Insight 1）

**问题**：结构过于工整，缺少变化

**Before（AI味重）**：
```markdown
### 洞察一：XXX

**原文引用**
XXX

**现象（What）**
XXX
```

**After（人性化）**：
```markdown
## 第一个怪事：老板想要的"东厂锦衣卫"

先跟你讲个场景。

有个朋友跟我说...
```

---

### 📊 校验总结

**AI味道浓度**：⭐⭐⭐⭐（较重）

**人性化程度**：⭐⭐（较低）

**总体评价**：文章专业度不错，但"AI味道"较重，缺少个人视角和情感温度。建议进行"人性化改造"。
```

---

## 🔄 工作流程更新

### 旧流程（v2.1）

```
1. 输入聊天记录
2. 分析提炼洞察
3. 用户选择洞察
4. 生成文章
5. 质量自我评估
6. 优化方案选择（可选）
7. 最终输出
```

### 新流程（v2.2）

```
1. 输入聊天记录
2. 分析提炼洞察
3. 用户选择洞察
4. 生成文章
5. 质量自我评估
6. 【新增】Sub-Agent校验（触发条件：用户要求"去除AI味道"或评分过低）
7. 【新增】根据Sub-Agent建议优化或提供优化选项
8. 最终输出
```

---

## 🎯 何时调用Sub-Agent？

### 自动触发条件
- ✅ 用户明确要求"去除AI味道"
- ✅ 自我评估发现"缺少个人感"评分低于⭐⭐⭐（3星）
- ✅ 用户选择"方案E：综合改造"

### 手动触发
- 用户可以主动要求："帮我检查一下这篇文章的AI味道"

### 不调用的情况
- 文章质量评分良好（所有维度≥⭐⭐⭐⭐）
- 用户选择"保持现状"
- 用户选择手动优化

---

## 💡 使用示例

### 示例1：自动触发Sub-Agent

```
用户：用dongcha处理这个对话，要去除AI味道

AI：[生成文章...]
    文章已生成，正在调用Sub-Agent进行校验...

Sub-Agent：🤖 校验报告：
    AI味道浓度：⭐⭐⭐⭐（较重）
    主要问题：结构工整、缺少个人视角

    优化建议：1. 增加第一人称 2. 口语化 3. 结构灵活化

AI：根据Sub-Agent建议，我将进行全面优化...
    [优化完成]
```

### 示例2：用户手动触发

```
用户：帮我检查这篇文章的AI味道

AI：正在调用Sub-Agent审查文章...
    Sub-Agent：🤖 校验报告...

    您希望如何处理？
    A. 根据建议自动优化
    B. 提供建议，我自己改
    C. 保持现状

用户：A

AI：好的，我将进行优化...
```

---

## 🔧 技术实现

### Sub-Agent调用方法

```python
# 使用Task tool调用Sub-Agent
Task(
    subagent_type="general-purpose",
    prompt=f"""你是一位资深的文章编辑，擅长识别AI生成内容的"机器味"。

你的任务：
1. 从读者角度审查这篇文章
2. 识别"AI味道"的具体表现（结构工整、语言书面、缺少个人感等）
3. 给出3-5个具体的优化建议
4. 提供1-2个before/after修改示例

文章内容：
{article_content}

请给出具体的、可执行的优化建议，让文章更像真人写的。"""
)
```

### 预期输出

Sub-Agent会返回：
- 3-5个"AI味道"问题
- 每个问题的严重程度评级（⭐⭐⭐⭐⭐）
- 3-5个具体优化建议
- 1-2个修改示例（before + after）

---

## 📝 更新内容总结

### 新增文件部分
1. **阶段4.5**：添加"Sub-Agent校验机制"完整说明
2. **Sub-Agent调用流程**：详细的工作流程和使用示例
3. **校验维度**：3大维度的检测标准
4. **输出格式**：校验报告模板

### 更新文件部分
1. **用户选择流程**：整合Sub-Agent后的完整流程

### 版本对比

| 功能 | v2.1 | v2.2 |
|------|------|------|
| 质量评估 | 主AI自我评估 | 主AI评估 + Sub-Agent校验 |
| AI味道检测 | 无 | 专项检测+优化建议 |
| 优化建议 | 通用方案 | 针对性建议+before/after示例 |
| 客观性 | 主观评估 | 第三方视角审查 |

---

## 🎯 核心价值

### 对用户
- ✅ 更客观地发现"AI味道"问题
- ✅ 获得具体的优化建议
- ✅ 看到before/after对比示例
- ✅ 更容易获得"人性化"的文章

### 对技能
- ✅ 解决主AI的自我盲点问题
- ✅ 提升文章质量（人性化和吸引力）
- ✅ 更好地满足用户"去除AI味道"的需求
- ✅ 形成"生成-校验-优化"的质量闭环

---

## 📈 实际效果验证

我们已经用v2.2的Sub-Agent机制处理了同样的对话：

**v2.1（无Sub-Agent）**：
- 生成了8000字深度长文
- 自我评估发现问题，但优化方向不够具体
- 用户选择"方案A：拆分系列"
- 最终生成3篇文章

**v2.2（有Sub-Agent）**：
- 能够更精确识别"AI味道"的具体表现
- 提供针对性的优化建议
- 给出before/after对比示例
- 用户可以选择"自动优化"或"手动优化"

---

## 🔮 未来扩展方向

### 可能的增强
1. **多轮校验**：Sub-Agent优化后，可以再次校验，确保问题已解决
2. **校验模板**：根据不同文章类型（深度分析、随笔、评论）使用不同的校验标准
3. **用户反馈学习**：根据用户的满意度调整校验标准和优化建议
4. **批量校验**：一次校验多篇文章，提高效率

---

## 版本信息

- **当前版本**：v2.2
- **上一版本**：v2.1
- **更新日期**：2026年1月21日
- **核心更新**：添加Sub-Agent校验机制，让AI去校验AI

---

## 技术说明

本文技能更新基于用户反馈："生成的文章还是有AI比较重的味道"。

Sub-Agent校验机制的灵感来源于：
1. **代码审查**（Code Review）：让独立开发者审查代码质量
2. **同行评议**（Peer Review）：让同领域专家评估学术价值
3. **编辑审稿**：让编辑从读者角度改进文章

本质上，这是"AI版"的"编辑审稿"机制。

**"AI校验AI，让文章更像真人写的。"**
